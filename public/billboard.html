<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Billboard Charts</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        .song { margin: 10px 0; }
        button { margin: 5px; padding: 10px; }
    </style>
</head>
<body>
    <h1>Billboard Charts - Top 10</h1>
    <div>
        <button onclick="loadChart('hot-100')">Hot 100</button>
        <button onclick="loadChart('artist-100')">Artist 100</button>
    </div>
    <div id="chart">Select a chart above</div>
    <div id="status"></div>

    <script>
        const API_KEY = '13526bb673msh005f132a34f304cp1bd530jsn5e4e1e7411db';
        
        async function fetchChart(chartType) {
            try {
                const url = `https://billboard-charts-api.p.rapidapi.com/${chartType}.php`;
                
                const response = await fetch(url, {
                    method: 'GET',
                    headers: {
                        'X-Rapidapi-Key': API_KEY,
                        'X-Rapidapi-Host': 'billboard-charts-api.p.rapidapi.com'
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`API Error: ${response.status}`);
                }
                
                return await response.json();
            } catch (error) {
                console.error('Error:', error);
                throw error;
            }
        }
        
        function displayChart(data, chartType) {
            const chartDiv = document.getElementById('chart');
            const statusDiv = document.getElementById('status');
            
            console.log('API Response:', data);
            
            let songs = [];
            
            if (Array.isArray(data)) {
                songs = data;
            } else if (data.content) {
                songs = typeof data.content === 'object' && !Array.isArray(data.content) 
                    ? Object.values(data.content) 
                    : data.content;
            } else if (data.chart) {
                songs = data.chart;
            } else if (data.entries) {
                songs = data.entries;
            }
            
            if (!songs || songs.length === 0) {
                chartDiv.innerHTML = 'No chart data available';
                return;
            }
            
            let html = '';
            songs.slice(0, 10).forEach(song => {
                const rank = song.rank || song.position || song['chart-position'] || '?';
                const title = song.title || song.song || song.name || 'Unknown';
                const artist = song.artist || song.artists || 'Unknown Artist';
                
                html += `<div class="song">${rank}. ${title} - ${artist}</div>`;
            });
            
            chartDiv.innerHTML = html;
            
            const now = new Date().toISOString();
            statusDiv.textContent = `Chart: ${chartType.toUpperCase()} | Fetched: ${now}`;
        }
        
        async function loadChart(chartType) {
            document.getElementById('chart').textContent = 'Loading...';
            try {
                const data = await fetchChart(chartType);
                displayChart(data, chartType);
            } catch (error) {
                document.getElementById('chart').textContent = `Error: ${error.message}`;
            }
        }
    </script>
</body>
</html>
